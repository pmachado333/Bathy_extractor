<!-- /index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Parameter JSON Generator — SLB Theme</title>
  <meta name="description" content="Generate a JSON file with coordinates, UTM zone, and hemisphere flag." />
  <style>
    :root{
      --slb-blue:#003366;      /* primary brand blue */
      --slb-blue-600:#1c5991;  /* accent (not official, chosen for UI states) */
      --slb-blue-050:#f1f5fb;  /* very light background */
      --ink:#0b1320;
      --muted:#5c6b8a;
      --ok:#0f9d58;
      --err:#c62828;
      --radius:16px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,"Apple Color Emoji","Segoe UI Emoji";
      color:var(--ink);
      background:linear-gradient(180deg,var(--slb-blue-050),#ffffff 40%);
    }
    header{
      background:var(--slb-blue);
      color:#fff;
      padding:24px 16px;
      text-align:center;
    }
    header h1{
      margin:0 0 4px;
      font-weight:800; letter-spacing:.2px;
    }
    header p{margin:0; opacity:.9}
    main{
      display:grid;
      place-items:center;
      padding:28px 16px 48px;
    }
    .card{
      width:100%;
      max-width:860px;
      background:#fff;
      border-radius:var(--radius);
      box-shadow:0 8px 30px rgba(0,0,0,.08);
      overflow:hidden;
      border:1px solid #e6eef7;
    }
    .card .bar{
      height:6px;
      background:linear-gradient(90deg,var(--slb-blue),var(--slb-blue-600));
    }
    .content{
      padding:20px;
      display:grid;
      grid-template-columns:1fr;
      gap:18px;
    }
    @media (min-width:860px){
      .content{grid-template-columns:1.2fr .8fr}
    }
    fieldset{
      border:1px solid #e6eef7;
      border-radius:12px;
      padding:16px;
    }
    legend{
      padding:0 8px;
      color:var(--slb-blue);
      font-weight:700;
    }
    .row{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:12px;
    }
    label{
      display:block;
      font-size:14px;
      color:var(--muted);
      margin-bottom:6px;
    }
    input[type="number"]{
      width:100%;
      padding:12px 12px;
      border:1px solid #d8e3f3;
      border-radius:10px;
      font-size:16px;
      transition:border .15s ease, box-shadow .15s ease;
    }
    input[type="number"]:focus{
      outline:none;
      border-color:var(--slb-blue-600);
      box-shadow:0 0 0 4px rgba(28,89,145,.12);
    }
    .switch{
      display:flex; align-items:center; gap:10px; margin-top:8px;
    }
    .actions{
      display:flex; gap:12px; flex-wrap:wrap; margin-top:6px;
    }
    button{
      appearance:none;
      border:none;
      background:var(--slb-blue);
      color:#fff;
      padding:12px 18px;
      border-radius:12px;
      font-weight:700;
      cursor:pointer;
      transition:transform .06s ease, background .15s ease, box-shadow .15s ease;
      box-shadow:0 6px 16px rgba(0,51,102,.25);
    }
    button:hover{background:var(--slb-blue-600)}
    button:active{transform:translateY(1px)}
    button.secondary{
      background:#fff; color:var(--slb-blue);
      border:1px solid #cfe1f7; box-shadow:none;
    }
    .muted{
      font-size:13px; color:var(--muted);
    }
    .preview{
      background:#0c1b33; color:#e7eefc;
      border-radius:12px; padding:12px; min-height:220px;
      font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,Monaco,monospace;
      overflow:auto;
      border:1px solid #243a67;
      white-space:pre;
      tab-size:2;
    }
    .status{
      min-height:20px; font-size:14px; margin-top:8px;
    }
    .status.ok{ color:var(--ok) }
    .status.err{ color:var(--err) }
    footer{
      text-align:center; padding:20px; color:var(--muted); font-size:13px;
    }
    .kpi{
      display:grid; grid-template-columns:1fr 1fr; gap:8px; margin-top:4px;
      color:#254a7a; font-size:13px;
    }
    .kpi div{background:#f6f9fe;border:1px solid #e6eef7;border-radius:8px;padding:8px}
    .kpi strong{color:#0e3770}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>
</head>
<body>
  <header>
    <h1>Parameter JSON Generator</h1>
    <p>Interface to build & download your Bathymetry input JSON file.</p>
  </header>
  <main>
    <section class="card" role="region" aria-labelledby="form-title">
      <div class="bar" aria-hidden="true"></div>
      <div class="content">
        <!-- Left: Form -->
        <div>
          <h2 id="form-title" class="sr-only">Parameters</h2>

          <fieldset>
            <legend>Coordinates</legend>
            <div class="row" style="margin-bottom:12px">
              <div>
                <label for="lonStart">Longitude Start</label>
                <input id="lonStart" name="lonStart" type="number" step="0.01" required />
              </div>
              <div>
                <label for="lonEnd">Longitude End</label>
                <input id="lonEnd" name="lonEnd" type="number" step="0.01" required />
              </div>
            </div>
            <div class="row">
              <div>
                <label for="latStart">Latitude Start</label>
                <input id="latStart" name="latStart" type="number" step="0.01" required />
              </div>
              <div>
                <label for="latEnd">Latitude End</label>
                <input id="latEnd" name="latEnd" type="number" step="0.01" required />
              </div>
            </div>
          </fieldset>

          <fieldset style="margin-top:12px">
            <legend>Projection</legend>
            <div class="row">
              <div>
                <label for="zone">UTM Zone</label>
                <input id="zone" name="zone" type="number" step="1" min="1" max="60" required />
              </div>
              <div class="switch">
                <input id="south" name="south" type="checkbox" />
                <label for="south">South Hemisphere (<span class="muted">sets <code>South</code> boolean</span>)</label>
              </div>
            </div>
            <div class="kpi" aria-hidden="true">
              <div>Hint: <strong>Zone 23S</strong> covers parts of Brazil.</div>
              <div>Checked = <strong>true</strong>, Unchecked = <strong>false</strong></div>
            </div>
          </fieldset>

          <div class="actions">
            <button id="btnGenerate" type="button" title="Generate and download JSON">Generate JSON</button>
            <button id="btnReset" class="secondary" type="button" title="Reset to defaults">Reset</button>
            <span id="status" class="status" role="status" aria-live="polite"></span>
          </div>
          <p class="muted">File name: <code>parameters.json</code></p>
        </div>

        <!-- Right: Preview -->
        <div>
          <h3 style="margin:0 0 8px;color:var(--slb-blue)">Preview</h3>
          <pre id="preview" class="preview" aria-label="JSON preview"></pre>
        </div>
      </div>
    </section>
  </main>
  <footer>
    Built with ❤️ in SLB blues. Primary color #003366.
  </footer>

  <script>
    // Default values (from your request)
    const defaults = {
      coordinates: {
        longitude: { start: -44.87, end: -44.48 },
        latitude:  { start: -25.85, end: -25.45 }
      },
      zone: 23,
      South: true
    };

    const els = {
      lonStart: document.getElementById('lonStart'),
      lonEnd:   document.getElementById('lonEnd'),
      latStart: document.getElementById('latStart'),
      latEnd:   document.getElementById('latEnd'),
      zone:     document.getElementById('zone'),
      south:    document.getElementById('south'),
      preview:  document.getElementById('preview'),
      status:   document.getElementById('status'),
      btnGenerate: document.getElementById('btnGenerate'),
      btnReset: document.getElementById('btnReset'),
    };

    function setDefaults(){
      els.lonStart.value = defaults.coordinates.longitude.start;
      els.lonEnd.value   = defaults.coordinates.longitude.end;
      els.latStart.value = defaults.coordinates.latitude.start;
      els.latEnd.value   = defaults.coordinates.latitude.end;
      els.zone.value     = defaults.zone;
      els.south.checked  = defaults.South;
      updatePreview(); // sync preview
      clearStatus();
    }

    function clearStatus(){ els.status.textContent=''; els.status.className='status'; }

    function readValues(){
      // Important: coerce to numbers, handle NaN
      const lonStart = Number(els.lonStart.value);
      const lonEnd   = Number(els.lonEnd.value);
      const latStart = Number(els.latStart.value);
      const latEnd   = Number(els.latEnd.value);
      const zone     = Number(els.zone.value);
      const South    = !!els.south.checked;

      return { lonStart, lonEnd, latStart, latEnd, zone, South };
    }

    function validate(v){
      // Why: prevent obvious mistakes before writing files
      if([v.lonStart,v.lonEnd,v.latStart,v.latEnd,v.zone].some(n => Number.isNaN(n))){
        return "All numeric fields must be valid numbers.";
      }
      if(v.lonStart > v.lonEnd){ return "Longitude start must be ≤ longitude end."; }
      if(v.latStart > v.latEnd){ return "Latitude start must be ≤ latitude end."; }
      if(v.zone < 1 || v.zone > 60){ return "UTM zone must be between 1 and 60."; }
      if(v.lonStart < -180 || v.lonEnd > 180){ return "Longitude must be within [-180, 180]."; }
      if(v.latStart < -90 || v.latEnd > 90){ return "Latitude must be within [-90, 90]."; }
      return null;
    }

    function model(){
      const v = readValues();
      const err = validate(v);
      if(err){ throw new Error(err); }
      return {
        coordinates: {
          longitude: { start: v.lonStart, end: v.lonEnd },
          latitude:  { start: v.latStart, end: v.latEnd }
        },
        zone: v.zone,
        South: v.South
      };
    }

    function updatePreview(){
      try{
        const m = model();
        els.preview.textContent = JSON.stringify(m, null, 2);
        els.status.textContent = "Ready";
        els.status.className = "status ok";
      }catch(e){
        els.preview.textContent = '';
        els.status.textContent = e.message;
        els.status.className = "status err";
      }
    }

    function downloadJSON(obj, filename="parameters.json"){
      const blob = new Blob([JSON.stringify(obj, null, 2)], { type: "application/json" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    }

    // Wire up events
    ['input','change'].forEach(ev=>{
      [els.lonStart,els.lonEnd,els.latStart,els.latEnd,els.zone,els.south].forEach(i=>{
        i.addEventListener(ev, updatePreview, { passive:true });
      });
    });
    els.btnReset.addEventListener('click', setDefaults);
    els.btnGenerate.addEventListener('click', ()=>{
      try{
        const m = model();
        downloadJSON(m, 'parameters.json');
        els.status.textContent = "Downloaded parameters.json";
        els.status.className = "status ok";
      }catch(e){
        els.status.textContent = e.message;
        els.status.className = "status err";
      }
    });

    // Init
    setDefaults();
  </script>
</body>
</html>
